{% extends 'index3.html' %}
{% load static %}
{% block customcss %}
  <link rel="stylesheet" href="{% static 'css/routes.css' %}" />
  <style>
    .row {
      margin-bottom: 20px;
    }
  </style>
{% endblock %}

{% block header %}
  <div class="navbar navbar-expand-md header-menu-one bg-light">
    <div class="nav-bar-header-one">
      <div class="header-logo">
        <a href="{% url 'transport:transport-dashboard' %}'}"><img src="{% static 'img/FASTransit.jpeg' %}" alt="logo" style="height: 48px; width: 161px; padding-left: 5px;" /></a>
      </div>
      <div class="toggle-button sidebar-toggle">
        <button type="button" class="item-link">
          <span class="btn-icon-wrap">
            <span></span>
            <span></span>
            <span></span>
          </span>
        </button>
      </div>
    </div>
    <div class="d-md-none mobile-nav-bar">
      <button class="navbar-toggler pulse-animation" type="button" data-toggle="collapse" data-target="#mobile-navbar" aria-expanded="false"><i class="far fa-arrow-alt-circle-down"></i></button>
      <button type="button" class="navbar-toggler sidebar-toggle-mobile"><i class="fas fa-bars"></i></button>
    </div>
    <div class="header-main-menu collapse navbar-collapse" id="mobile-navbar">
      <ul class="navbar-nav"></ul>
      <ul class="navbar-nav">
        <li class="navbar-item dropdown header-admin">
          <a class="navbar-nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false">
            <div class="admin-title">
              <h5 class="item-title">{{ user.name }}</h5>
              <span></span>
            </div>
            <div class="admin-img">
              <img src="{% static 'img/figure/student10.png' %}" alt="Admin" />
            </div>
          </a>
          <div class="dropdown-menu dropdown-menu-right">
            <div class="item-header">
              <h6 class="item-title">{{ user.name }}</h6>
            </div>
            <div class="item-content">
              <ul class="settings-list">
                <li>
                  <a href="{% url 'transport:logout' %}"><i class="flaticon-turn-off"></i>Log Out</a>
                </li>
              </ul>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
{% endblock %}

{% block sidebar %}
  <div class="sidebar-main sidebar-menu-one sidebar-expand-md sidebar-color">
    <div class="mobile-sidebar-header d-md-none">
      <div class="header-logo">
        <a href="{% url 'transport:transport-dashboard' %}"><img src="{% static 'img/FASTransit.jpeg' %}" alt="logo" style="width: 161px; height: 48px;" /></a>
      </div>
    </div>
    <div class="sidebar-menu-content" style="margin-top:50px;">
      <ul class="nav nav-sidebar-menu sidebar-toggle-view">
        <li class="nav-item">
          <a href="{% url 'transport:transport-dashboard' %}" class="nav-link"><i class="fa-solid fa-house"></i><span>Dashboard</span></a>
        </li>
        <li class="nav-item sidebar-nav-item">
          <a href="{% url 'transport:transport-dashboard' %}" class="nav-link"><i class="fa-solid fa-road"></i><span>Routes</span></a>
          <ul class="nav sub-group-menu">
            <li class="nav-item">
              <a href="{% url 'transport:view-routes' %}" class="nav-link"><i class="fa-solid fa-route"></i>All Routes</a>
            </li>
            <li class="nav-item">
              <a href="{% url 'transport:add-route' %}" class="nav-link"><i class="fa-solid fa-location-dot"></i>Add Route</a>
            </li>
          </ul>
        </li>
        <li class="nav-item sidebar-nav-item">
          <a href="{% url 'transport:transport-dashboard' %}" class="nav-link"><i class="fa-solid fa-user"></i><span>Drivers</span></a>
          <ul class="nav sub-group-menu">
            <li class="nav-item">
              <a href="{% url 'transport:transport-drivers' %}" class="nav-link"><i class="fa-solid fa-id-card"></i>All Drivers</a>
            </li>
            <li class="nav-item">
              <a href="{% url 'transport:add_driver' %}" class="nav-link"><i class="fa-solid fa-user-plus"></i>Add Driver</a>
            </li>
          </ul>
        </li>
        <li class="nav-item sidebar-nav-item">
          <a href="{% url 'transport:transport-dashboard' %}" class="nav-link"><i class="fa-solid fa-bus"></i><span>Vehicles</span></a>
          <ul class="nav sub-group-menu">
            <li class="nav-item">
              <a href="#" class="nav-link"><i class="fa-solid fa-van-shuttle"></i>All Vehicles</a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link"><i class="fa-solid fa-truck-arrow-right"></i>Add Vehicle</a>
            </li>
          </ul>
        </li>
        <li class="nav-item sidebar-nav-item">
          <a href="{% url 'transport:transport-dashboard' %}" class="nav-link"><i class="flaticon-technological"></i><span>Account</span></a>
        </li>
        <li class="nav-item sidebar-nav-item">
          <a href="{% url 'transport:transport-dashboard' %}" class="nav-link"><i class="flaticon-maths-class-materials-cross-of-a-pencil-and-a-ruler"></i><span>Payment</span></a>
          <ul class="nav sub-group-menu">
            <li class="nav-item">
              <a href="{% url 'transport:view_fees_paid' %}" class="nav-link"><i class="fas fa-angle-right"></i>All Payments</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
{% endblock %}
{% block maincontent %}
  <!-- Breadcrumbs Area Start Here -->
  <div class="breadcrumbs-area">
    <h3 class="text-primary">Transport</h3>
    <ul>
      <li>
        <a href="{% url 'transport:transport-dashboard' %}" class="text-muted">Home</a>
      </li>
      <li class="text-dark">Transporter Dashboard</li>
    </ul>
  </div>
  <!-- Breadcrumbs Area End Here -->

  <!-- Dashboard Stats Section -->
  <div class="row justify-content-center">
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="dashboard-summery-one rounded-lg shadow-sm">
        <div class="row align-items-center">
          <div class="col-6">
            <div class="item-icon bg-light-magenta text-center p-3 rounded-circle">
              <i class="fa-solid fa-van-shuttle text-white"></i>
            </div>
          </div>
          <div class="col-6">
            <div class="item-content">
              <div class="item-title text-muted">Total Vehicle</div>
              <div class="item-number display-4">{{ total_vehicles }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="dashboard-summery-one rounded-lg shadow-sm">
        <div class="row align-items-center">
          <div class="col-6">
            <div class="item-icon bg-light-blue text-center p-3 rounded-circle">
              <i class="fa-solid fa-route text-white"></i>
            </div>
          </div>
          <div class="col-6">
            <div class="item-content">
              <div class="item-title text-muted">Total Route</div>
              <div class="item-number display-4">{{ total_routes }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="dashboard-summery-one rounded-lg shadow-sm">
        <div class="row align-items-center">
          <div class="col-6">
            <div class="item-icon bg-light-yellow text-center p-3 rounded-circle">
              <i class="fa-solid fa-users-line text-white"></i>
            </div>
          </div>
          <div class="col-6">
            <div class="item-content">
              <div class="item-title text-muted">Total Providers</div>
              <div class="item-number display-4">{{ total_providers }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Vehicles Section -->
  <div class="table-container mt-5">
    <h2 class="text-dark mb-3">Recent Vehicles</h2>
    <table class="table table-striped table-bordered table-hover">
      <thead class="thead-light">
        <tr>
          <th>License Plate</th>
          <th>Status</th>
          <th>Capacity</th>
          <th>Provider</th>
        </tr>
      </thead>
      <tbody>
        {% for vehicle in recent_vehicles %}
          <tr>
            <td>{{ vehicle.license_plate }}</td>
            <td>{{ vehicle.status.status_name }}</td>
            <td>{{ vehicle.capacity_type.max_capacity }}</td>
            <td>{{ vehicle.transport_provider.name }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}

{% block customjs %}

{% endblock %}
